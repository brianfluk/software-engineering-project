<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" dir="ltr">

<head>
  <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />

  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="google" value="notranslate">

  <link href="/css/bootstrap.css" rel="stylesheet" type="text/css">
  <link href="/css/theme.css" rel="stylesheet" type="text/css">

  	<style>
  	  #messages { list-style-type: none; margin-left:5px; padding: 0; }
  	  #messages li:nth-child(odd) { background: #eee; }

  	  ul {
		   list-style-position: inside;
		}
    </style>

  <title>Lecture # -- LectureChat</title>
</head>

<body>
	<%- include navbar.ejs %>
	<div class="container-fluid">
   		<div class="row">

			<div class="col-sm-8">
				<!-- 16:9 aspect ratio -->
				<div class="embed-responsive embed-responsive-16by9">
					<!-- <iframe class="embed-responsive-item" src="/pdf/image_prototype.pdf"></iframe> -->
					<iframe class="embed-responsive-item" src="/pdf/<%= pdf %>"></iframe>
				</div>
			</div>

			<div class="col-sm-4">
	        	<div class="panel panel-default">
	        		<div class="panel-heading">Chat</div>
	      			<div class="panel-body">
	        				<!-- <div class="container"> -->
	        					<ul id="messages">
	        					</ul>
<!-- 	       		    			<div class="row message-bubble">
									<p class="text-muted">Matt Townsen</p>
									<span>What to do in class</span>
								</div>
								<div class="row message-bubble">
									<p class="text-muted">Matt Townsen</p>
									<span>Pay attention</span>
								</div>
			                	<div class="row message-bubble">
			            			<p class="text-muted">Matt Townsen</p>
			                    	<span>lol</span>
			        		    </div>
			            	    <div class="row message-bubble">
			           				<p class="text-muted">Matt Townsen</p>
			                 	   <p>Hi</p>
			               		</div> -->
							<!-- </div> -->
						
			           		<div class="panel-footer">
			                	<div class="input-group">
			                		<form action="">
								      <input id="m" autocomplete="off" /><button>Send</button>
								    </form>
<!-- 			                  		<input type="text" class="form-control" id="m">
			                  		<span class="input-group-btn">
			                    		<button class="btn btn-default" type="button">Send</button>
			                  		</span> -->
			               		</div>
							</div>
	      			</div>
				</div>
			</div>
    	</div>
	</div>
	<!-- <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
 	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> -->

	<script src="/socket.io/socket.io.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
	<script>

		var socket = io();
		var room = <%= roomID %>;
		var name = document.cookie.split("=")[1];

		window.onload= function(){
			console.log("in room " + room);
			socket.emit('room', room);
			socket.emit('name', name);
		}

	  	$(function () {
		    $('form').submit(function(){
		    	socket.emit('chat message', $('#m').val());
		    	$('#m').val('');
		    	return false;
		    });
		    socket.on('chat message', function(msg){
		      	$('#messages').append($('<li>').text(msg));
		    });
	  	});

	</script>
 	
</body>
</html>